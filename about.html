<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>About — TrueWeather</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/styles.css" rel="stylesheet">
</head>

<body class="hero-bg">
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <span class="brand-logo" aria-hidden="true">
            <!-- Simple sun + cloud SVG logo (keeps same visuals as index) -->
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Weather logo">
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0" stop-color="#ffd166" />
                  <stop offset="1" stop-color="#ffaf4d" />
                </linearGradient>
              </defs>
              <g>
                <circle cx="20" cy="20" r="8" fill="url(#g1)" />
                <g fill="#ffc857">
                  <rect x="19" y="6" width="2" height="6" rx="1" transform="rotate(0 20 9)" />
                  <rect x="19" y="34" width="2" height="6" rx="1" transform="rotate(0 20 37)" />
                  <rect x="6" y="19" width="6" height="2" rx="1" transform="rotate(0 9 20)" />
                  <rect x="34" y="19" width="6" height="2" rx="1" transform="rotate(0 37 20)" />
                </g>
                <path
                  d="M46 34a8 8 0 0 0-8-8 9 9 0 0 0-1 .06A10 10 0 0 0 24 20a11 11 0 0 0-1 .06A8 8 0 1 0 26 44h20a6 6 0 0 0 0-12z"
                  fill="#e6eef8" />
              </g>
            </svg>
          </span>
          <span class="brand-text">TrueWeather</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu"
          aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navMenu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Forecast</a></li>
            <li class="nav-item"><a class="nav-link" href="#" id="favorites-link">Favorites</a></li>
            <li class="nav-item"><a class="nav-link active" aria-current="page" href="about.html">About</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="container mb-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-10">
        <div class="row about-two-col align-items-stretch">
          <div class="col-12 col-md-4 d-flex p-0">
            <img src="assets/images/globe2.png" id="about-globe" class="img-fluid about-globe m-0" alt="Globe">
          </div>
          <div class="col-12 col-md-8 d-flex">
            <div class="about-content-box p-4 bg-white bg-opacity-85 rounded shadow-sm w-100 d-flex align-items-center">
              <p class="lead mb-0">
                Our weather app is designed to give you fast, accurate, and easy-to-understand
                forecasts wherever you are. With real-time updates, hourly predictions, and multi-day outlooks,
                you can plan your day with confidence. Whether you’re tracking changing conditions,
                preparing for travel, or simply curious about the skies, our intuitive design and reliable data help keep you informed.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Contact form (added below the about section) -->
  <section class="container mb-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8">
        <form id="contact-form" class="contact-card p-4 bg-white bg-opacity-95 rounded shadow-sm" novalidate>
          <h3 class="h5 mb-3">Contact us</h3>
          <p class="small text-muted mb-2">For testing purposes only — this form is client-side only. Submissions are saved to your browser's Local Storage and are not sent to any server.</p>
          <div id="contact-feedback" aria-live="polite" class="mb-2"></div>

          <div class="mb-3">
            <label for="contact-name" class="form-label">Name</label>
            <input id="contact-name" type="text" class="form-control" required>
          </div>

          <div class="mb-3">
            <label for="contact-email" class="form-label">Email</label>
            <input id="contact-email" type="email" class="form-control" required>
          </div>

          <div class="mb-3">
            <label for="contact-message" class="form-label">Message</label>
            <textarea id="contact-message" rows="5" class="form-control" required></textarea>
          </div>

          <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary">Send message</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer class="bg-light py-3 mt-4">
    <div class="container d-flex flex-column flex-md-row align-items-center gap-2">
      <div class="text-muted">&copy; <span id="year"></span> TrueWeather.</div>
      <div class="ms-md-auto small">
        <a href="https://openweathermap.org/" target="_blank" rel="noopener">Data: OpenWeatherMap</a>
      </div>
    </div>
  </footer>

  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/save-locations.js"></script>
  <script src="js/app.js"></script>

  <!-- Favorites modal (same as homepage) -->
  <div class="modal fade" id="favoritesModal" tabindex="-1" aria-labelledby="favoritesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="favoritesModalLabel">Favourites</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="favorites-list" class="list-group small"></div>
        </div>
        <div class="modal-footer">
          <button type="button" id="clear-favorites-btn" class="btn btn-sm btn-outline-danger">Clear all</button>
          <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function () {
      function renderFavorites() {
        const listEl = document.getElementById('favorites-list');
        if (!listEl) return;
        listEl.innerHTML = '';
        try {
          const getFn = (window.saveLocations && typeof window.saveLocations.getSavedLocations === 'function') ? window.saveLocations.getSavedLocations : (window.getSavedLocations || null);
          const removeFn = (window.saveLocations && typeof window.saveLocations.removeLocation === 'function') ? window.saveLocations.removeLocation : (window.removeLocation || null);
          const favorites = (typeof getFn === 'function') ? getFn() : (JSON.parse(localStorage.getItem('weatherAppFavorites') || '[]'));
          if (!favorites || favorites.length === 0) {
            listEl.innerHTML = '<div class="text-muted">No favourites saved</div>';
            return;
          }
          favorites.forEach(f => {
            const item = document.createElement('div');
            item.className = 'list-group-item d-flex justify-content-between align-items-center';
            item.innerHTML = `<div>${f.city}${f.country ? ', ' + f.country : ''}</div>`;
            const btnWrap = document.createElement('div');
            const gotoBtn = document.createElement('button');
            gotoBtn.className = 'btn btn-sm btn-link';
            gotoBtn.textContent = 'Go';
            gotoBtn.addEventListener('click', () => {
              try {
                if (f.lat != null && f.lon != null) {
                  if (typeof window !== 'undefined' && window.getWeatherByCoords) {
                    window.getWeatherByCoords(f.lat, f.lon);
                  } else if (typeof getWeatherByCoords === 'function') {
                    getWeatherByCoords(f.lat, f.lon);
                  }
                } else if (f.city) {
                  if (typeof window !== 'undefined' && window.getWeatherByCity) {
                    window.getWeatherByCity(f.city);
                  } else if (typeof getWeatherByCity === 'function') {
                    getWeatherByCity(f.city);
                  }
                }
                const modalEl = document.getElementById('favoritesModal');
                const modal = bootstrap.Modal.getInstance(modalEl) || new bootstrap.Modal(modalEl);
                modal.hide();
              } catch (e) { console.warn('Go to favourite failed', e); }
            });
            const delBtn = document.createElement('button');
            delBtn.className = 'btn btn-sm btn-outline-danger ms-2';
            delBtn.textContent = 'Remove';
            delBtn.addEventListener('click', () => {
              try {
                if (typeof removeFn === 'function') {
                  removeFn(f.city, f.country);
                } else {
                  const favs = JSON.parse(localStorage.getItem('weatherAppFavorites') || '[]').filter(x => !(x.city === f.city && x.country === f.country));
                  localStorage.setItem('weatherAppFavorites', JSON.stringify(favs));
                }
                renderFavorites();
              } catch (e) { console.warn('Remove favourite failed', e); }
            });
            btnWrap.appendChild(gotoBtn);
            btnWrap.appendChild(delBtn);
            item.appendChild(btnWrap);
            listEl.appendChild(item);
          });
        } catch (e) {
          console.warn('Failed to render favourites', e);
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        const favLink = document.getElementById('favorites-link');
        const clearBtn = document.getElementById('clear-favorites-btn');
        if (favLink) {
          favLink.addEventListener('click', (e) => {
            e.preventDefault();
            renderFavorites();
            const modalEl = document.getElementById('favoritesModal');
            const modal = new bootstrap.Modal(modalEl);
            modal.show();
          });
        }
        if (clearBtn) {
          clearBtn.addEventListener('click', () => {
            try { localStorage.removeItem('weatherAppFavorites'); renderFavorites(); } catch (e) { console.warn('Clear favourites failed', e); }
          });
        }
      });
    })();
  </script>
</body>

</html>